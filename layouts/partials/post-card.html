{{ $baseURL   := .Site.BaseURL }}
{{ $author    := index .Site.Data.authors .Params.author }}
{{ $directory := "images/content/" }}
{{ $slug      := printf "%s/covers.jpg" (.Title | urlize) }}
{{ $filename  := where (readDir (printf "assets/%s" $directory)) "Name" $slug }}

<div class="mdl-card mdl-cell mdl-cell--12-col"{{ if $filename }} style="background-image: url('./{{ printf "%s%s" $directory $filename }}');"{{ end }}>
    <div class="mdl-card__media mdl-color-text--grey-50">
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
    </div>
    <div class="mdl-color-text--grey-600 mdl-card__supporting-text">
        <p>{{ i18n "wordCount"  }}</p>
        <p>{{ .Description }}</p>
    </div>
    <div class="mdl-card__supporting-text meta mdl-color-text--grey-600">
        <div class="meta__item">
            <div class="material-icons mdl-badge mdl-badge--overlap">alarm</div>
            <div class="meta__item--time">
                <strong>
                    {{ range .Params.topics }}
                        <a href="{{ $baseURL }}/topics/{{ . | urlize }}">{{ . }}</a>
                    {{ end }}
                </strong>
                <span>{{ .Date.Format "Mon Jan 2, 2006" }}</span>
            </div>
        </div>
        <div class="meta__item">
            <div class="lc-author lc-author__img" style="background-image: url('{{ $baseURL }}/{{ $author.picture.thumbnail }}');"></div>
            <div class="meta__item--author">
                <strong>{{ $author.name }}</strong>
                <a href="{{ $author.socialNetworks.twitter }}">
                    <span>@{{ $author.socialNetworks.twitter }}</span>
                </a>
            </div>
        </div>
    </div>
</div>
