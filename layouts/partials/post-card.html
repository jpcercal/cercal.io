{{ $baseURL   := .Site.BaseURL }}
{{ $author    := index .Site.Data.authors .Params.author }}
{{ $directory := "content/posts/" }}
{{ $filename  := "index.jpg" }}
{{ $cover     := where (readDir (printf "%s%s" $directory .Slug)) "Name" $filename }}

<div class="mdl-card mdl-cell mdl-cell--12-col">
    <div class="mdl-card__media mdl-color-text--grey-50" {{ if $cover }} style="background: url('{{ printf "%s%s/%s" $baseURL .Slug $filename }}') no-repeat center/contain;"{{ end }}>
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
    </div>
    <div class="mdl-color-text--grey-600 mdl-card__supporting-text">
        <p>{{ partial "word-count.html" . }}</p>
        <p>{{ partial "reading-time.html" . }}</p>
        <p>{{ .Description }}</p>
    </div>
    <div class="mdl-card__supporting-text meta mdl-color-text--grey-600">
        <div class="meta__item">
            <div class="material-icons mdl-badge mdl-badge--overlap">alarm</div>
            <div class="meta__item--time">
                <strong>
                    {{ range .Params.topics }}
                        <a href="{{ $baseURL }}/topics/{{ . | urlize }}">{{ . }}</a>
                    {{ end }}
                </strong>
                <span>{{ .Date.Format "Mon Jan 2, 2006" }}</span>
            </div>
        </div>
        <div class="meta__item">
            <div class="lc-author lc-author__img" style="background-image: url('{{ $baseURL }}/{{ $author.picture.thumbnail }}')"></div>
            <div class="meta__item--author">
                <strong>{{ $author.name }}</strong>
                <a href="{{ $author.socialNetworks.twitter }}">
                    <span>@{{ $author.socialNetworks.twitter }}</span>
                </a>
            </div>
        </div>
    </div>
</div>
